/*! IoradWebWidget 2015-06-21 */
this.JST=this.JST||{},this.JST["templates/freshdesk/freshdeskCategoryList.hbs"]=Handlebars.template({1:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'<option value="'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:f,typeof e===g?e.call(a,{name:"id",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.name||(null!=a?a.name:a))?e:f,typeof e===g?e.call(a,{name:"name",hash:{},data:d}):e))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return null!=(e=b.each.call(a,null!=a?a.categories:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:""},useData:!0}),this.JST["templates/freshdesk/freshdeskFolderList.hbs"]=Handlebars.template({1:function(a,b,c,d){var e,f;return'<select id="'+this.escapeExpression((f=null!=(f=b.id||(null!=a?a.id:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"id",hash:{},data:d}):f))+'" class="invisible-options">\n'+(null!=(e=b.each.call(a,null!=a?a.folders:a,{name:"each",hash:{},fn:this.program(2,d,0),inverse:this.noop,data:d}))?e:"")+"</select>\n"},2:function(a,b,c,d){var e,f=b.helperMissing,g="function",h=this.escapeExpression;return'    <option value="'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:f,typeof e===g?e.call(a,{name:"id",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.name||(null!=a?a.name:a))?e:f,typeof e===g?e.call(a,{name:"name",hash:{},data:d}):e))+"</option> \n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e;return null!=(e=b.each.call(a,null!=a?a.categories:a,{name:"each",hash:{},fn:this.program(1,d,0),inverse:this.noop,data:d}))?e:""},useData:!0}),this.JST["templates/freshdesk/mainLayout.hbs"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<section id="ioradWidget" class="content rounded-6 iorad-widget hide-in-mobile" title="Iorad Tutorial Widget">\n    <div id="tutorialLocation" class="widget-layout">\n        <div class="widget-header"><h2 class="heading">Create a Solution</h2></div>\n        <div class="widget-location-selector"><div class="selector-label"><h4>Categories</h4></div><div><select id="categorySelector"></select></div></div>\n        <div class="widget-location-selector"><div class="selector-label"><h4>Solutions</h4></div><div id=\'foldersList\'></div></div>\n        <div id="control">\n            <a id=\'newTutorialBtn\' class=\'btn btn-iorad-widget\' title=\'open IORAD editor\' href=\'#\'>ADD</a>\n        </div>\n    </div>\n</section>\n<style>\n    .invisible-options {\n        display: none;\n    }\n\n    .iorad-widget {\n        border-bottom: 1px solid #e5e5e5;\n    }\n\n        .iorad-widget div {\n            display: inline-block;\n        }\n\n    #control {\n        float: right;\n        position: relative;\n    }\n\n    .widget-layout {\n        width: 98%;\n    }\n\n    .widget-header {\n        padding-right: 2em;\n    }\n\n    .widget-location-selector {\n        padding-right: 2em;\n        height: 30px;\n    }\n\n        .widget-location-selector .selector-label {\n            padding-right: 1em;\n        }\n\n    .btn-iorad-widget {\n        color: #006063;\n        border-color: #006063;\n        font-weight: bold;\n        background-color: white;\n        background-image: none;\n        text-shadow: none;\n        width: 112px;\n        line-height: 20px;\n        margin: 0 auto;\n        display: block;\n    }\n\n    .iorad-widget-modal {\n        width: 28%;\n        font-size: 16px;\n    }\n</style>\n<script type=\'text/javascript\' src=\'//iorad.com/server/assets/js/iorad.js\'></script>\n'},useData:!0}),this.JST["templates/freshdesk/modalTemplate.hbs"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=this.escapeExpression,h=this.lambda;return'<div class="modal hide fade iorad-widget-modal" role="dialog" id="successModal" aria-hidden="true" style="display:none;">\n    <div class="modal-header"></div>\n    <div class="modal-body">\n        <div id="successMsg">\n            The solution <b>'+g((f=null!=(f=b.articleTitle||(null!=a?a.articleTitle:a))?f:b.helperMissing,"function"==typeof f?f.call(a,{name:"articleTitle",hash:{},data:d}):f))+'</b> has been successfully created.\n        </div>\n    </div><div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button><a class="btn btn-primary" href="/solution/categories/'+g(h(null!=(e=null!=a?a.article:a)?e.categoryId:e,a))+"/folders/"+g(h(null!=(e=null!=a?a.article:a)?e.folderId:e,a))+"/articles/"+g(h(null!=(e=null!=a?a.article:a)?e.id:e,a))+'">VIEW ARTICLE</a>\n    </div>\n</div>\n'},useData:!0});var ioradWebWidget=function(a,b){return a={freshdesk:{},config:{},util:{},templates:{}}}(ioradWebWidget||{});ioradWebWidget.util.freshdesk=function(a){var b="/solution/categories.json",c="/solution/categories/{category_id}/folders/{folder_id}/articles.json",d=function(){return{dataType:"json",contentType:"application/json"}};return a.listCategories=function(){var a=d();return a.type="GET",a.url=b,a},a.createArticle=function(a,b,e){var f=d();return f.type="POST",f.url=c.replace("{category_id}",a.toString()).replace("{folder_id}",b.toString()),f.data=e,f},a}(ioradWebWidget.util.freshdesk||{}),ioradWebWidget.templates.freshdeskTemplates={mainLayout:function(){var a=JST["templates/freshdesk/mainLayout.hbs"];return a()},freshDeskModal:function(a,b){var c=JST["templates/freshdesk/modalTemplate.hbs"];return c({article:a,articleTitle:b})},categoryOptionTemplate:function(a){var b=JST["templates/freshdesk/freshdeskCategoryList.hbs"];return b({categories:a})},folderListTemplate:function(a){var b=JST["templates/freshdesk/freshdeskFolderList.hbs"];return b({categories:a})}},ioradWebWidget.freshdesk=function(a){return a.runApp=function(a,b){var c=a(".c-wrapper");c.html(ioradWebWidget.templates.freshdeskTemplates.mainLayout()+c.html());var d=function(){iorad=b.iorad||{};var c=function(){return a.ajax(ioradWebWidget.util.freshdesk.listCategories())},d=function(b,c,d){return a.ajax(ioradWebWidget.util.freshdesk.createArticle(b,c,d))},e=function(b){var c=a(b.srcElement);a("#foldersList").children().each(function(b,c){a(c).addClass("invisible-options")}),a("#"+c.val()).removeClass("invisible-options")},f=function(b){var c=[];b.each(function(a){c.push({id:a.category.id,name:a.category.name,folders:a.category.folders})});var d=a("#categorySelector");d.html(ioradWebWidget.templates.freshdeskTemplates.categoryOptionTemplate(c)),a("#foldersList").html(ioradWebWidget.templates.freshdeskTemplates.folderListTemplate(c)),a("#"+d.val()).removeClass("invisible-options"),d.click(e)};c().then(f,function(a){}),iorad.init({env:"live"},function(){var b=0;a("#newTutorialBtn").click(function(){a("body").addClass("iorad-loading"),iorad.createTutorial(),b=setTimeout(function(){a("body").removeClass("iorad-loading")},5e3),a("#iorad-editor").off().load(function(){a("body").addClass("iorad-open"),clearTimeout(b)})}),iorad.on("editor:close",function(c){a("body").removeClass("iorad-open iorad-loading"),clearTimeout(b);var e=iorad.getEmbeddedPlayerUrl(c.uid,c.tutorialId,c.tutorialTitle),f=a(e);f.attr("src",f.attr("src")+"#viewsteps");var g=a("#categorySelector").val(),h=a("#"+g).val(),i={solution_article:{title:c.tutorialTitle,folder_id:h,description:"<div>"+f.prop("outerHTML").replace(/\"/g,"'")+"</div>"}},j=JSON.stringify(i);d(g,h,j).then(function(b){var d={id:b.article.id,categoryId:g,folderId:h};a("#successModal").length>0&&a("#successModal").remove(),a("body").append(ioradWebWidget.templates.freshdeskTemplates.freshDeskModal(d,c.tutorialTitle)),a("#successModal").modal("show")},function(a){})})})},e=function(a){var c=10,d=function(){b.iorad?a():b.setTimeout(d,c)};b.setTimeout(d,c)};e(d)},a}(ioradWebWidget.freshdesk||{}),ioradWebWidget.freshdesk.runApp(jQuery,window);